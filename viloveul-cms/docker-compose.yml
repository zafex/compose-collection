version: "3.1"
services:
  db-viloveul-cms:
    image: mariadb
    container_name: viloveul-db
    restart: always
    environment:
      - MYSQL_DATABASE=viloveul_cms
      - MYSQL_USER=viloveul
      - MYSQL_PASSWORD=viloveul

  queue-viloveul-cms:
    image: rabbitmq:3.7-alpine
    container_name: viloveul-queue
    restart: always

  relay-viloveul-cms:
    image: fajrulaz/viloveul-cms-relay
    container_name: viloveul-cms-relay
    restart: always
    volumes:
      - ./private.pem:/viloveul/var/private.pem
      - ./public.pem:/viloveul/var/public.pem
    ports:
      - "19910:19910"

  api-viloveul-cms:
    image: fajrulaz/viloveul-cms-api
    container_name: viloveul-cms-api
    restart: always
    volumes:
      - ./private.pem:/viloveul/var/private.pem
      - ./public.pem:/viloveul/var/public.pem
    ports:
      - "19911:19911"
    environment:
      - VILOVEUL_AUTH_PASSPHRASE=viloveul
      - VILOVEUL_CACHE_ADAPTER=apcu
      - ADMIN_EMAIL=me@viloveul.com
      - ADMIN_PASSWORD=dordordor

  dashboard-viloveul-cms:
    image: fajrulaz/viloveul-cms-dashboard
    container_name: viloveul-cms-dashboard
    restart: always
    ports:
      - "19912:19912"

  theme-viloveul-cms:
    image: fajrulaz/viloveul-cms-theme
    container_name: viloveul-cms-theme
    restart: always
    ports:
      - "19913:19913"